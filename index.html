<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
  <title>Santa Tracker PH â€“ Viral Phone Edition ğŸ…ğŸ“±</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background: radial-gradient(circle at top, #0e2a47 0%, #061327 65%); color: #fff; overflow-x: hidden; }
    header { padding: 8px 10px; text-align: center; background: linear-gradient(135deg, #b1121f, #6b0000); }
    header h1 { margin: 0; font-size: 1.05rem; line-height: 1.2; }
    header p { margin: 2px 0 0; font-size: 0.75rem; opacity: 0.95; }
    #map { height: 58vh; width: 100%; }
    .panel { padding: 10px; display: grid; gap: 10px; grid-template-columns: repeat(2, minmax(0, 1fr)); }
    .card { background: rgba(255,255,255,0.09); border-radius: 14px; padding: 12px; text-align: center; box-shadow: 0 10px 20px rgba(0,0,0,0.3); backdrop-filter: blur(6px); }
    .card h3 { margin: 0 0 6px; font-size: 0.9rem; }
    button, .link-btn { padding: 10px 12px; border-radius: 12px; border: none; cursor: pointer; background: #198754; color: #fff; font-weight: 700; font-size: 0.8rem; width: 100%; }
    .secondary { background: #0d6efd; } .warn { background: #ffc107; color: #000; } .danger { background: #dc3545; }
    footer { padding: 8px; text-align: center; font-size: 0.7rem; background: #041022; }
    .quote { font-style: italic; font-size: 0.8rem; }
    .snowflake { position: fixed; top: -10px; color: white; font-size: 0.9em; animation: fall linear infinite; z-index: 9999; pointer-events: none; }
    @keyframes fall { to { transform: translateY(110vh); } }
    .toast { position: fixed; bottom: 16px; left: 50%; transform: translateX(-50%); background: #000; padding: 12px 16px; border-radius: 14px; box-shadow: 0 12px 24px rgba(0,0,0,0.45); display: none; z-index: 10000; font-size: 0.85rem; }
    @media (min-width: 768px) { #map { height: 52vh; } .panel { grid-template-columns: repeat(4, 1fr); } }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ… Santa Tracker PH</h1>
    <p id="subtitle">Malapit na si Santa! ğŸ</p>
    <p style="margin:2px 0 0;font-size:0.65rem;opacity:0.85;">by Kenichi</p>
  </header>

  <div id="map"></div>

  <section class="panel">
    <div class="card">
      <h3>ğŸ Gift ETA</h3>
      <p id="eta">--:--</p>
      <button onclick="generateETA()">Refresh ETA</button>
    </div>

    <div class="card">
      <h3>ğŸŒŸ Good Kid</h3>
      <p id="score">Score: 0</p>
      <button class="secondary" onclick="addPoints()">Good Deed</button>
    </div>

    <div class="card">
      <h3>ğŸ’¬ Santa Says</h3>
      <p id="quote" class="quote"></p>
      <button class="warn" onclick="newQuote()">New Message</button>
    </div>

    <div class="card">
      <h3>ğŸ¶ Sounds</h3>
      <button onclick="toggleMusic()">Music On/Off</button>
      <div style="height:6px"></div>
      <button class="secondary" onclick="hohoho()">Ho Ho Ho!</button>
    </div>

    <div class="card" style="grid-column: span 2;">
      <h3>ğŸ® FREE ROBUX ğŸ˜±</h3>
      <button class="danger" onclick="robuxPrank()">ğŸ‘‰ Click here to claim</button>
    </div>

    <div class="card" style="grid-column: span 2;">
      <h3>â³ Countdown</h3>
      <p id="countdown"></p>
    </div>
  </section>

  <footer>
    Share the prank & the joy ğŸ„<br />
    <button onclick="copyLink()">Copy Shareable Link</button>
  </footer>

  <div class="toast" id="toast">Pabili ka sa mama mo! ğŸ˜‚ğŸ</div>

  <audio id="music" loop playsinline>
    <source src="https://cdn.pixabay.com/download/audio/2022/12/15/audio_7b3a96e7f1.mp3" type="audio/mpeg" />
  </audio>
  <audio id="hoho" playsinline>
    <source src="https://cdn.pixabay.com/download/audio/2021/12/22/audio_3e3b9b1c7d.mp3" type="audio/mpeg" />
  </audio>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const map = L.map('map', { zoomControl: false }).setView([12.8797, 121.7740], 6);
    L.control.zoom({ position: 'bottomright' }).addTo(map);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { attribution: 'Â© OpenStreetMap contributors' }).addTo(map);

    const santaIcon = L.icon({
      iconUrl: 'https://cdn-icons-png.flaticon.com/512/616/616408.png',
      iconSize: [48, 48],
      iconAnchor: [24, 24]
    });

    let santaMarker = L.marker([12.8797, 121.7740], { icon: santaIcon }).addTo(map).bindPopup('ğŸ… Santa is VERY close!');
    let userLat = 12.8797;
    let userLng = 121.7740;

    // Line from Santa to user
    let pathLine = L.polyline([[santaMarker.getLatLng().lat, santaMarker.getLatLng().lng], [userLat, userLng]], { color: 'yellow', dashArray: '5, 10' }).addTo(map);

    function moveSanta() {
      santaMarkerLat = santaMarker.getLatLng().lat;
      santaMarkerLng = santaMarker.getLatLng().lng;
      santaMarkerLat += (Math.random() - 0.5) * 0.01;
      santaMarkerLng += (Math.random() - 0.5) * 0.01;
      santaMarker.setLatLng([santaMarkerLat, santaMarkerLng]);
      pathLine.setLatLngs([[santaMarkerLat, santaMarkerLng], [userLat, userLng]]);
      setTimeout(moveSanta, 6000);
    }
    moveSanta();

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(pos => {
        userLat = pos.coords.latitude;
        userLng = pos.coords.longitude;
        pathLine.setLatLngs([[santaMarker.getLatLng().lat, santaMarker.getLatLng().lng], [userLat, userLng]]);
      });
    }

    function generateETA() { const now = new Date(); const future = new Date(now.getTime() + Math.random() * 4 * 60 * 60 * 1000); eta.innerText = future.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }); }
    let score = 0; function addPoints() { score += Math.floor(Math.random() * 6) + 1; if(score>20) showToast('ğŸŒŸ Santa is SUPER proud of you!'); document.getElementById('score').innerText = `Score: ${score}`; }

    const quotes = ['Mabait ka ngayong taon. Proud si Santa sayo!','Your kindness is the real gift ğŸ','You made people smile this year ğŸ˜Š','Hindi lahat nakikita, pero ramdam ang kabutihan mo.'];
    function newQuote() { quote.innerText = quotes[Math.floor(Math.random() * quotes.length)]; }

    function updateCountdown() { const now = new Date(); const midnight = new Date(); midnight.setHours(24,0,0,0); const diff = midnight - now; const h = Math.floor(diff / 3600000); const m = Math.floor((diff % 3600000) / 60000); countdown.innerText = `${h}h ${m}m left`; }

    const music = document.getElementById('music'); const ho = document.getElementById('hoho');
    function tryAutoplay() { music.volume = 0.6; music.play().catch(()=>showToast('ğŸ”Š Tap Music to enable sound')); }
    function toggleMusic() { music.paused ? music.play() : music.pause(); }
    function hohoho() { ho.play(); }
    function robuxPrank() { showToast('Pabili ka sa mama mo! ğŸ˜‚'); hohoho(); }
    function showToast(msg) { const t=document.getElementById('toast'); t.innerText=msg; t.style.display='block'; setTimeout(()=>t.style.display='none',3500); }
    function copyLink() { navigator.clipboard.writeText(location.href); showToast('ğŸ„ Link copied!'); }

    function snow() { const s=document.createElement('div'); s.className='snowflake'; s.style.left=Math.random()*100+'vw'; s.style.animationDuration=4+Math.random()*5+'s'; s.innerText='â„'; document.body.appendChild(s); setTimeout(()=>s.remove(),9000); }
    setInterval(snow,260);

    generateETA(); newQuote(); updateCountdown(); setInterval(updateCountdown,60000); tryAutoplay();
  </script>
</body>
</html>
